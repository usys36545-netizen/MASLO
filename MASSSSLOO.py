# Импортируем необходимые модули из PyQt5
from PyQt5 import uic  # Для загрузки .ui файлов, созданных в Qt Designer
from PyQt5.QtWidgets import QApplication, QWidget  # Основные классы для создания GUI
from PyQt5.QtCore import Qt
import sys  # Для работы с аргументами командной строки и завершения программы


class App(QWidget):
    """Основной класс приложения, наследуемый от QWidget."""

    def __init__(self):
        """Инициализация главного окна приложения."""
        super().__init__()  # Вызываем конструктор родительского класса
        self.start()  # Загружаем и отображаем UI
        self.ComboBox()  # Настраиваем взаимодействие с элементами интерфейса

    def start(self):
        self.info = {
            0:['<b>Добро пожаловать!</b><br>'
               'Это приложение создано для тех, кто<br>'
               'только начинает свой путь на кухне или хочет<br>'
               'освежить базовые навыки. Здесь вы найдёте понятные<br>'
               'инструкции, полезные советы и пошаговые рецепты.<br>'
               'Удачи и приятного аппетита!',28],
            1:['Вода\nКастрюлька\nЛюбая чистая посуда для подачи готового блюда.\nДуршлаг для макарон\n',28],
            2:['Инструкция:\n'
                '1. Возьмите кастрюльку и налейте в неё чуть больше половины\n'
                '   воды.\n'
                '2. Поставьте на максимальный огонь и дождитесь, пока вода закипит.\n'
                '3. Уменьшите огонь наполовину, добавьте приправы по вкусу\n'
                '   (обычно полстоловой ложки соли, также можно добавить лук,\n'
                '   лавровый лист, перец) и аккуратно опустите пельмени (будьте осторожны —\n'
                '   вода может плеснуть на руки).\n'
                '4. Помешивая, доведите воду до кипения и варите 5–8 минут.\n'
                '5. Выловите пельмени шумовкой и подавайте к столу.',25],
            3:['Инструкция:\n'
                '1. Промойте рис в холодной воде 2–3 раза, пока вода не станет \n'
                '   прозрачной. Это уберёт лишний крахмал и предотвратит слипание.\n'
                '2. Возьмите кастрюлю и налейте воду в пропорции 2:1 \n'
                '   (2 стакана воды на 1 стакан риса). Добавьте щепотку соли\n'
                '   и 1 чайную ложку масла (по желанию).\n'
                '3. Доведите воду до кипения на сильном огне. После закипания\n'
                '   аккуратно всыпьте промытый рис и перемешайте.\n'
                '4. Уменьшите огонь до минимума, накройте крышкой\n'
                '   и варите 15–20 минут без помешивания. Не открывайте крышку\n'
                '   раньше времени!\n'
                '5. Проверьте готовность: вода должна полностью впитаться, а рис\n'
                '   — стать мягким. Снимите с огня, дайте постоять под крышкой 5\n'
                '   минут, затем взбейте вилкой.\n',24],
            4:['Инструкция:\n'
                '1. Возьмите кастрюлю и налейте в неё воды так, чтобы она покрывала\n'
                '   макароны с запасом — примерно на 2–3 пальца выше их уровня\n'
                '   (или около 1 литра воды на 100 грамм макарон).\n'
                '2. Поставьте кастрюлю на максимальный огонь и дождитесь кипения воды.\n'
                '3. Добавьте в кипящую воду соль (примерно 1 чайную ложку на литр воды)\n'
                '   и, при желании, пару капель растительного масла.\n'
                '4. Аккуратно всыпьте макароны в кипяток и слегка помешайте, чтобы они не\n'
                '   прилипли ко дну.\n'
                '5. Варите макароны на среднем огне, время от времени помешивая,\n'
                '   согласно времени, указанному на упаковке (обычно 8–12 минут).\n'
                '6. Готовность проверяйте на вкус: макароны должны быть мягкими, но\n'
                '   слегка упругими.\n'
                '7. Слейте воду через дуршлаг.\n',22],
            5:['Инструкция:\n'
                '1. Промойте гречку, возьмите кастрюлю и насыпьте в неё промытую крупу.\n'
                '2. Залейте промытую гречку водой в пропорции 1:2.\n'
                '3. Добавьте щепотку соли и, по желанию, кусочек сливочного масла.\n'
                '4. Поставьте кастрюлю на максимальный огонь и доведите до кипения.\n'
                '5. Как только вода закипит, уменьшите огонь до минимума, накройте\n'
                '   кастрюлю крышкой и варите ещё 15–20 минут — до полного впитывания воды.\n'
                '6. Не мешайте гречку во время варки и\n'
                '   не снимайте крышку — это поможет ей равномерно пропариться.\n'
                '7. Готовую гречку снимите с огня, дайте ей постоять под крышкой ещё\n'
                '   5–10 минут, затем аккуратно разрыхлите вилкой и подавайте к столу.\n',20],
            6:['Инструкция:\n'
                'Два основных вида — вкрутую и всмятку.\n'
                'Для начала в обоих случаях положите яйца в кастрюлю и залейте\n'
                '   водой так, чтобы она полностью покрывала яйца (небольшая часть яйца может\n'
                '   плавать на поверхности).\n'
                '- Вкрутую:\n'
                '  1. Включите плиту и дождитесь, пока вода закипит.\n'
                '  2. Выключите огонь и оставьте яйца в горячей воде на 12–15 минут.\n'
                '  3. Достаньте из воды, остудите 2 минуты и подавайте.\n'
                '- Всмятку:\n'
                '  1. Включите плиту и дождитесь, пока вода закипит.\n'
                '  2. Уменьшите огонь до минимального и варите ещё 2 минуты.\n'
                '  3. Достаньте из воды, аккуратно срежьте верхнюю часть ножом и подавайте.\n',20],
            7:['Инструкция:\n'
                '1. Разогрейте сковороду на среднем огне и добавьте немного масла.\n' 
                '2. Аккуратно разбейте яйца в миску, а затем вылейте на сковороду —\n'
                '   так меньше шансов повредить желток.\n' 
                '3. Готовьте 2–3 минуты на слабом огне под крышкой: белок должен стать\n'
                '   непрозрачным, а желток — остаться жидким (или чуть схватиться, по вкусу).\n' 
                '4. Посолите, поперчите и подавайте сразу.\n',20]
        }
        self.o = uic.loadUi('MASLO.ui')  # Загружаем UI-файл, созданный в Qt Designer
        self.o.show()  # Отображаем окно

    def ComboBox(self):
        """Настраивает обработчики сигналов для элементов интерфейса."""
        # Подключаем сигнал активации (выбора элемента) в выпадающем списке к обработчику
        self.o.comboBox.activated.connect(self.on_combo_activated)

        # Подключаем сигнал переключения чекбокса (темный режим) к обработчику
        self.o.checkBox.toggled.connect(self.toggle_dark_mode)

        # Флаг для отслеживания текущего состояния темы (светлая/тёмная)
        self.is_dark_mode = False

    def on_combo_activated(self, index):
        self.o.label.setText(self.info[index][0])
        font = self.o.label.font()
        font.setPointSize(self.info[index][1])
        self.o.label.setFont(font)

        # Примечание: в будущем можно вынести тексты в словарь или отдельный файл,
        # чтобы упростить расширение и поддержку.

    def toggle_dark_mode(self, checked):
        """
        Обработчик переключения темного режима.
        Применяет пользовательский стиль (stylesheet) в зависимости от состояния чекбокса.
        """
        self.is_dark_mode = checked  # Сохраняем текущее состояние

        if checked:
            # Задаём тёмную тему с помощью CSS-подобного стиля
            dark_stylesheet = """
            QDialog {
                background-color: #2b2b2b;
                color: #ffffff;
            }
            QLabel {
                color: #ffffff;
                background-color: #2b2b2b;
            }
            QComboBox {
                background-color: #3c3c3c;
                color: #ffffff;
                border: 1px solid #555555;
                padding: 5px;
            }
            QComboBox QAbstractItemView {
                background-color: #3c3c3c;
                color: #ffffff;
                selection-background-color: #555555;
            }
            QCheckBox {
                color: #ffffff;
            }
            """
            self.o.setStyleSheet(dark_stylesheet)
        else:
            # Сбрасываем стиль, возвращаясь к системной (светлой) теме
            self.o.setStyleSheet("")


# Точка входа в приложение
if __name__ == "__main__":
    QApplication.setAttribute(Qt.AA_EnableHighDpiScaling, True)
    QApplication.setAttribute(Qt.AA_UseHighDpiPixmaps, True)
    app = QApplication(sys.argv)  # Создаём экземпляр QApplication
    ex = App()  # Создаём и инициализируем главное окно
    sys.exit(app.exec_())  # Запускаем главный цикл обработки событий

